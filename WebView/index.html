<!doctype html>
<html lang="en">
  <head>
    <title>Life Viewer</title>
    <meta charset="UTF-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="chart.js"></script>
    <script src="script.js"></script>
    <script src="utils.js"></script>
    <script src="auth.js"></script>
    <script src="elements.js"></script>
    <script src="betting.js"></script>
    <script src="canvas.js"></script>
    <script src="plague.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="icons.css" />
    <link rel="icon" href="lifesim.png" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="main-container">
      <div id="auth-section" class="auth-section">
        <div id="login-panel" class="auth-panel" style="display: none;">
          <h3>Sign in to LifeSim</h3>
          <button id="discord-login-button" class="discord-button">
            <span class="pixel--discord"></span> Login with Discord
          </button>
        </div>
        <div id="user-panel" class="auth-panel" style="display: none;">
          <div id="user-info">
            <img id="user-avatar" src="" alt="Avatar" style="display: none;" />
            <span id="user-name"></span>
          </div>
          <button id="logout-button">Logout</button>
        </div>
      </div>
      <h1 id="total-simulation-time-display">Total simulation time: 0s</h1>
      <h2 id="current-life-duration-display">Current life duration: 0s</h2>
      <h2 id="longest-life-duration-display">Longest life duration: 0s</h2>
      <div class="viewer-count">
        <span class="pixel--user-solid"></span>
        </svg>
        <h3 id="viewer-count-text">1 viewer</h3>
      </div>
      <div class="canvas-container">
        <canvas id="view" width="1024" height="1024"></canvas>
        <div id="main-info">
          <div id="left-info">
            <h2 class="entity-category-display">Food: 0</h2>
            <h2 class="entity-category-display">Animals: 0</h2>
            <h3 id="herbivore-display" class="animal-type-display">
              Herbivores: 0
            </h3>
            <h3 id="carnivore-display" class="animal-type-display">
              Carnivores: 0
            </h3>
            <h3 id="omnivore-display" class="animal-type-display">
              Omnivores: 0
            </h3>
          </div>
          <div id="right-info" style="display: none;">
            <h2>Actions:</h2>
            <h3 id="reignition-counter">Reignition count: 0</h3>
            <div class="slider-container">
              <label id="reignition-chaos-label" for="reignition-chaos-slider">ðŸ’¥ Chaos: 0.50</label>
              <input
                type="range"
                id="reignition-chaos-slider"
                min="0"
                max="1"
                step="0.01"
                value="0.5"
              />
            </div>
            <button id="reignite-life-button">Reignite Life</button>
            <h4>Reignition cost: <span id="reignition-cost">0</span> ðŸ’°</h4>

            <hr style="margin: 20px 0; border-color: #cecece;">

            <h2>Plague:</h2>
            <p style="font-size: 12px; margin: 8px 0; color: #999;">Right-click on map to place pin</p>
            <div class="slider-container">
              <label id="plague-size-label" for="plague-size-slider">ðŸ¦  Size: 50</label>
              <input
                type="range"
                id="plague-size-slider"
                min="10"
                max="500"
                step="10"
                value="50"
              />
            </div>
            <button id="start-plague-button">Start Plague</button>
            <h4>Plague cost: <span id="plague-cost">0</span> ðŸ’°</h4>
          </div>
        </div>
      </div>
      <div class="chart-container">
        <h2>Population History (Last Minute)</h2>
        <canvas id="population-chart"></canvas>
      </div>
      <div id="betting-menu" class="betting-box" style="display: none;">
        <h2>
          <span class="betting-icon">ðŸ“ˆ</span>Will the animal count change in
          the next 30s?
        </h2>
        <div id="balance-display">ðŸ’°<span id="balance-amount">0</span></div>

        <div class="bet-controls">
          <div class="bet-input">
            <input
              id="bet-amount"
              type="number"
              placeholder="Wager amount"
              min="1"
              step="1"
            />
          </div>
          <div class="bet-quick-amounts">
            <button id="min-bet-button">Min</button>
            <button id="quarter-bet-button">1/4</button>
            <button id="half-bet-button">1/2</button>
            <button id="three-quarter-bet-button">3/4</button>
            <button id="max-bet-button">Max</button>
          </div>
          <div class="bet-buttons">
            <button id="bet-decrease">ðŸ“‰ Bet on Decrease</button>
            <button id="bet-increase">ðŸ“ˆ Bet on Increase</button>
          </div>
        </div>
        <div id="bet-statuses" class="bet-status">
          <h3>Past Bets</h3>
          <div id="bet-status-list"></div>
        </div>
      </div>
      <div id="leaderboard">
        <h2>Leaderboard (auto-refresh every 3m)</h2>
        <h3>Top Balances</h3>
        <div id="balance-leaderboard" class="leaderboard-list"></div>
        <h3>Most Bets Won</h3>
        <div id="bets-leaderboard" class="leaderboard-list"></div>
      </div>
    </div>
    <footer>
      <a href="https://discord.gg/Sds95KUr22" target="_blank" class="logo">
        <span class="pixel--discord"></span>
      </a>

      <a
        href="https://github.com/LordDeatHunter/LifeSim/"
        target="_blank"
        class="logo"
      >
        <span class="pixel--github"></span>
      </a>
    </footer>
  </body>
</html>
